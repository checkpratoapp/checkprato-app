<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>CheckPrato ‚Ä¢ Elite</title>

  <meta name="theme-color" content="#0a1320"/>
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" sizes="192x192" href="./icon-192.png">
  <link rel="apple-touch-icon" href="./icon-192.png">

  <!-- Chart (Gr√°fico) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg:#07121f;
      --bg2:#0b2033;
      --card:rgba(255,255,255,.04);
      --card2:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.08);
      --txt:#eaf2ff;
      --muted:rgba(234,242,255,.72);
      --green:#21e6b6;
      --green2:#17caa0;
      --orange:#f6b23a;
      --shadow:0 20px 60px rgba(0,0,0,.45);
      --r:22px;
      --max:560px;

      --glass: rgba(255,255,255,.06);
      --stroke3d: rgba(255,255,255,.10);
      --shadow3d: 0 24px 70px rgba(0,0,0,.55);
    }

    *{ box-sizing:border-box; }
    html, body{
      height:100%;
      margin:0;
      padding:0;
      background: var(--bg);
      color: var(--txt);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-x:hidden;
    }
    body{ padding-bottom: calc(92px + env(safe-area-inset-bottom)); }
    a{ color: var(--green); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .wrap{ max-width: var(--max); margin: 0 auto; padding: 16px 14px 24px; }

    .topbar{
      display:flex;
      align-items:center;
      gap:12px;
      margin-top:6px;
      margin-bottom: 14px;
    }
    .logo{
      width:44px;height:44px;border-radius:14px;
      background: linear-gradient(135deg, rgba(33,230,182,.35), rgba(33,230,182,.05));
      border:1px solid rgba(33,230,182,.35);
      display:flex;align-items:center;justify-content:center;
      font-weight:1000;
      color:var(--green);
      box-shadow: var(--shadow);
      flex:0 0 auto;
      overflow:hidden;
    }
    .brand{
      display:flex;flex-direction:column;gap:2px;
      min-width: 0;
      flex: 1 1 auto;
    }
    .brand small{color:var(--muted); letter-spacing:.08em; font-weight:900}
    .brand b{font-size:18px}

    .pill{
      display:flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:999px;
      background: rgba(255,255,255,.04);
      border:1px solid var(--stroke);
      color:var(--muted);
      font-weight:800;
      white-space:nowrap;
      flex:0 0 auto;
    }
    .pill .dot{
      width:10px;height:10px;border-radius:99px;background:var(--green);
      box-shadow: 0 0 0 6px rgba(33,230,182,.12);
    }

    .h1{
      font-size:34px;
      margin:12px 2px 14px;
      letter-spacing:.02em;
      color:var(--green);
      font-weight: 1000;
      line-height: 1.05;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border: 1px solid var(--stroke);
      border-radius: var(--r);
      padding: 16px;
      box-shadow: var(--shadow);
    }

    .hint{ color: var(--muted); font-weight: 650; line-height: 1.35; }
    .muted{ opacity:.85; }

    .row{display:flex; gap:12px; flex-wrap:wrap}
    .col{flex:1 1 140px; min-width: 140px}

    .label{
      margin: 12px 2px 6px;
      color: rgba(234,242,255,.65);
      font-weight: 950;
      letter-spacing:.12em;
      text-transform: uppercase;
      font-size: 12px;
    }

    input, select, textarea{
      width:100%;
      padding:14px 14px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: var(--txt);
      outline: none;
      font-size: 15px;
    }
    textarea{ min-height: 90px; resize: vertical; }
    input::placeholder{color: rgba(234,242,255,.35)}
    select{appearance:none}

    .btn{
      width:100%;
      padding: 16px 16px;
      border-radius: 18px;
      border: 0;
      cursor: pointer;
      font-weight: 950;
      font-size: 16px;
      letter-spacing: .02em;
      background: linear-gradient(135deg, var(--green), var(--green2));
      color:#042019;
      box-shadow: 0 18px 45px rgba(33,230,182,.18);
      margin-top: 14px;
    }
    .btnSecondary{
      width:100%;
      padding: 14px 16px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      cursor: pointer;
      font-weight: 900;
      font-size: 15px;
      background: rgba(255,255,255,.05);
      color: var(--txt);
      margin-top: 10px;
    }
    .btnOrange{
      width:100%;
      padding: 16px 16px;
      border-radius: 18px;
      border: 0;
      cursor: pointer;
      font-weight: 950;
      font-size: 16px;
      background: linear-gradient(135deg, #ffcc5a, #f6b23a);
      color:#201400;
      margin-top: 12px;
      box-shadow: 0 18px 45px rgba(246,178,58,.18);
    }

    .status{
      margin-top: 10px;
      font-weight: 800;
      color: rgba(234,242,255,.86);
    }

    .chips{display:flex; flex-wrap:wrap; gap:10px; margin-top:10px;}
    .chip{
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-weight: 900;
      cursor: pointer;
      user-select: none;
    }
    .chip.on{
      border-color: rgba(33,230,182,.45);
      background: rgba(33,230,182,.12);
      color: var(--txt);
      box-shadow: 0 0 0 6px rgba(33,230,182,.08);
    }

    .screen{
      display:none;
      margin-top: 8px;
      width: 100%;
      background: var(--bg);
      padding-bottom: calc(140px + env(safe-area-inset-bottom));
    }
    .screen.active{ display:block; }

    /* NAV */
    .nav{
      position: fixed;
      left:0; right:0; bottom:0;
      padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
      background: #07121f;
      border-top: 1px solid rgba(255,255,255,.08);
      z-index: 1000;
    }
    .navInner{
      max-width: var(--max);
      margin: 0 auto;
      display:flex;
      gap:10px;
      overflow-x: auto;
      padding: 6px 6px;
      scrollbar-width: none;
    }
    .navInner::-webkit-scrollbar{ display:none; }
    .navBtn{
      flex:0 0 auto;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      color: rgba(234,242,255,.6);
      font-weight: 950;
      padding: 12px 14px;
      border-radius: 999px;
      cursor:pointer;
      letter-spacing:.05em;
      white-space: nowrap;
    }
    .navBtn.active{
      background: rgba(33,230,182,.12);
      border-color: rgba(33,230,182,.35);
      color: var(--green);
      box-shadow: 0 0 0 6px rgba(33,230,182,.08);
    }

    /* PLATE */
    .platePreview{
      width:100%;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.14);
      overflow:hidden;
      margin-top: 12px;
    }
    .platePreview img{ width:100%; display:block; }

    /* DIETA */
    .meal{
      display:flex; justify-content:space-between; gap:12px;
      padding: 16px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      margin-top: 12px;
    }
    .meal .title{
      font-weight: 950;
      color: var(--green);
      letter-spacing:.08em;
      text-transform: uppercase;
      font-size: 12px;
      margin-bottom: 6px;
    }
    .meal p{margin:0; color: rgba(234,242,255,.88); font-weight:750; line-height:1.35}
    .kcal{
      display:flex; align-items:center; justify-content:center;
      min-width: 88px;
      border-radius: 999px;
      border:1px solid rgba(33,230,182,.25);
      background: rgba(33,230,182,.08);
      color: var(--green);
      font-weight: 1000;
      padding: 10px 12px;
      text-align:center;
    }

    /* TREINO */
    .dayCard{
      margin-top: 12px;
      padding: 14px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }
    .dayTitle{
      display:flex; align-items:center; justify-content:space-between;
      font-weight: 1000;
      color: rgba(234,242,255,.92);
      margin-bottom: 10px;
      letter-spacing:.03em;
    }
    .exercise{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px;
      padding: 12px 12px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.16);
      margin-top: 10px;
    }
    .ytBtn{
      border:0;
      border-radius: 999px;
      padding: 10px 12px;
      background: rgba(33,230,182,.10);
      border: 1px solid rgba(33,230,182,.25);
      color: var(--green);
      font-weight: 1000;
      cursor: pointer;
      min-width: 110px;
    }

    /* PARCEIROS */
    .partnerList{display:flex; flex-direction:column; gap:12px; margin-top:12px}
    .partnerRow{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px; border-radius:18px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.06);
    }
    .partnerName{display:flex; flex-direction:column; gap:4px}
    .partnerName b{font-weight: 1000}

    /* CHART */
    .chartBox{
      margin-top: 12px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.14);
      padding: 12px;
      overflow:hidden;
    }

    /* =========================
       BOAS-VINDAS (WELCOME)
       ========================= */
    .welcomeHero{
      border-radius: 26px;
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(700px 280px at 20% 10%, rgba(33,230,182,.18), transparent 60%),
        radial-gradient(600px 260px at 80% 30%, rgba(246,178,58,.14), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: 0 22px 70px rgba(0,0,0,.55);
      padding: 16px;
      overflow:hidden;
    }
    .wCarousel{
      position: relative;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      overflow: hidden;
      min-height: 260px;
    }
    .wSlide{
      display:none;
      padding: 18px 16px 16px;
      min-height: 260px;
      position: relative;
    }
    .wSlide.active{ display:block; }
    .wBg{
      position:absolute; inset:0;
      opacity:.9;
      background:
        radial-gradient(900px 340px at 20% 20%, rgba(33,230,182,.22), transparent 60%),
        radial-gradient(800px 360px at 80% 30%, rgba(246,178,58,.16), transparent 62%),
        radial-gradient(700px 380px at 45% 110%, rgba(33,230,182,.10), transparent 62%);
      pointer-events:none;
    }
    .wTop{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      z-index:1;
    }
    .wBadge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(234,242,255,.78);
      font-weight: 950;
      letter-spacing:.06em;
      text-transform: uppercase;
      font-size: 12px;
    }
    .wDots{ display:flex; gap:8px; align-items:center; }
    .wDot{
      width:10px;height:10px;border-radius:99px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      cursor:pointer;
    }
    .wDot.on{
      background: rgba(33,230,182,.40);
      border-color: rgba(33,230,182,.55);
      box-shadow: 0 0 0 6px rgba(33,230,182,.10);
    }
    .wTitle{
      position:relative;
      z-index:1;
      margin-top: 14px;
      font-size: 26px;
      font-weight: 1000;
      line-height: 1.1;
    }
    .wText{
      position:relative;
      z-index:1;
      margin-top: 10px;
      color: rgba(234,242,255,.85);
      font-weight: 750;
      line-height: 1.45;
    }
    .wQuote{
      position:relative;
      z-index:1;
      margin-top: 12px;
      padding: 12px 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(234,242,255,.88);
      font-weight: 850;
    }
    .wNavRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 14px;
    }

    @media (min-width: 900px){
      .wrap{ max-width: 900px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="logo">E</div>
      <div class="brand">
        <small>ELITE TERMINAL</small>
        <b>CheckPrato ‚Ä¢ Elite</b>
      </div>
      <div class="pill"><span class="dot"></span><span id="authTxt">Modo: Local</span></div>
    </div>

    <!-- =========================
         WELCOME (ANTES DE TUDO)
         ========================= -->
    <section id="viewWelcome" class="screen">
      <div class="h1">BEM-VINDO</div>

      <div class="welcomeHero">
        <div class="hint">
          O CheckPrato te ajuda com <b>dieta</b>, <b>treino</b>, <b>prato</b> e <b>evolu√ß√£o</b>.
          Tudo simples, bonito e objetivo.
        </div>

        <div class="wCarousel" style="margin-top:12px">
          <div class="wSlide active" data-slide="0">
            <div class="wBg"></div>
            <div class="wTop">
              <div class="wBadge">üî• Consist√™ncia</div>
              <div class="wDots" id="wDots"></div>
            </div>
            <div class="wTitle">Pequenas escolhas<br>mudam tudo.</div>
            <div class="wText">Voc√™ n√£o precisa de perfei√ß√£o. Precisa de dire√ß√£o.</div>
            <div class="wQuote">‚ÄúHoje eu s√≥ preciso fazer o m√≠nimo bem feito.‚Äù</div>
          </div>

          <div class="wSlide" data-slide="1">
            <div class="wBg"></div>
            <div class="wTop">
              <div class="wBadge">ü•ó Prato</div>
              <div class="wDots"></div>
            </div>
            <div class="wTitle">Controle sem neura.</div>
            <div class="wText">Registre suas escolhas e enxergue padr√µes.</div>
            <div class="wQuote">‚ÄúO que √© medido, melhora.‚Äù</div>
          </div>

          <div class="wSlide" data-slide="2">
            <div class="wBg"></div>
            <div class="wTop">
              <div class="wBadge">üèãÔ∏è Treino</div>
              <div class="wDots"></div>
            </div>
            <div class="wTitle">Treino que encaixa<br>na sua rotina.</div>
            <div class="wText">Do iniciante ao avan√ßado, com clareza e const√¢ncia.</div>
            <div class="wQuote">‚ÄúDisciplina vence motiva√ß√£o.‚Äù</div>
          </div>

          <div class="wSlide" data-slide="3">
            <div class="wBg"></div>
            <div class="wTop">
              <div class="wBadge">üìà Evolu√ß√£o</div>
              <div class="wDots"></div>
            </div>
            <div class="wTitle">Acompanhe sua<br>evolu√ß√£o real.</div>
            <div class="wText">O que voc√™ faz hoje aparece no seu progresso amanh√£.</div>
            <div class="wQuote">‚ÄúVoc√™ est√° mais perto do que pensa.‚Äù</div>
          </div>
        </div>

        <div class="wNavRow">
          <button class="btn" type="button" onclick="goCadastro()">Come√ßar agora</button>
          <button class="btnSecondary" type="button" onclick="goManual()">Ver manual</button>
        </div>

        <div id="welcomeManual" class="card" style="margin-top:14px">
          <div class="label">Manual r√°pido</div>
          <div class="hint" style="margin-top:6px">
            1) Fa√ßa seu <b>Cadastro</b> ‚úÖ<br>
            2) Ajuste seu <b>Perfil</b> ‚úÖ<br>
            3) Registre <b>Prato</b> e siga <b>Dieta</b> ‚úÖ<br>
            4) Monte seu <b>Treino</b> ‚úÖ<br>
            5) Veja <b>Evolu√ß√£o</b> (gr√°fico + metas) ‚úÖ
          </div>
        </div>
      </div>
    </section>

    <!-- =========================
         CADASTRO
         ========================= -->
    <section id="viewCadastro" class="screen">
      <div class="h1">CADASTRO</div>

      <div class="card">
        <div class="label">Peso (kg)</div>
        <input id="peso" placeholder="Ex: 78.5" inputmode="decimal" />

        <div class="label">Altura (cm)</div>
        <input id="altura" placeholder="Ex: 175" inputmode="numeric" />

        <div class="row" style="margin-top:6px">
          <div class="col">
            <div class="label">Objetivo</div>
            <select id="objetivo">
              <option value="">Selecione</option>
              <option>Emagrecimento</option>
              <option>Hipertrofia</option>
              <option>Sa√∫de</option>
              <option>Performance</option>
            </select>
          </div>
          <div class="col">
            <div class="label">N√≠vel</div>
            <select id="nivel">
              <option value="">Selecione</option>
              <option>Iniciante</option>
              <option>Intermedi√°rio</option>
              <option>Avan√ßado</option>
            </select>
          </div>
        </div>

        <div class="row" style="margin-top:6px">
          <div class="col">
            <div class="label">Condi√ß√£o</div>
            <select id="condicao">
              <option value="">Selecione</option>
              <option>Nenhuma</option>
              <option>Press√£o alta</option>
              <option>Colesterol</option>
              <option>Diabetes</option>
              <option>Ansiedade/Estresse</option>
            </select>
          </div>
          <div class="col">
            <div class="label">Restri√ß√£o</div>
            <select id="restricao">
              <option value="">Selecione</option>
              <option>Nenhuma</option>
              <option>Intoler√¢ncia √† lactose</option>
              <option>Gl√∫ten</option>
              <option>Vegetariano</option>
              <option>Vegano</option>
            </select>
          </div>
        </div>

        <div class="label">Esportes (pode marcar v√°rios)</div>
        <div class="chips" id="chipsEsportes"></div>

        <label class="hint" style="display:flex; gap:10px; align-items:flex-start; margin-top:12px">
          <input id="termo" type="checkbox" style="width:22px;height:22px;margin-top:2px" />
          <span>
            Aceito o termo (conte√∫do informativo)<br>
            <span style="opacity:.85">As sugest√µes s√£o informativas e n√£o substituem profissional.</span>
          </span>
        </label>

        <button class="btn" type="button" onclick="salvarCadastro()">SALVAR / ATUALIZAR</button>
        <button class="btnSecondary" type="button" onclick="limparCadastro()">LIMPAR</button>

        <div id="outCadastro" class="status"></div>
      </div>
    </section>

    <!-- =========================
         PERFIL
         ========================= -->
    <section id="viewPerfil" class="screen">
      <div class="h1">PERFIL</div>

      <div class="card">
        <div class="label">Nome</div>
        <input id="nome" placeholder="Seu nome" />

        <div class="label">Observa√ß√µes</div>
        <textarea id="obs" placeholder="Ex: Quero dormir melhor, melhorar dieta, reduzir ansiedade..."></textarea>

        <button class="btn" type="button" onclick="salvarPerfil()">SALVAR PERFIL</button>
        <div id="outPerfil" class="status"></div>
      </div>
    </section>

    <!-- =========================
         PRATO
         ========================= -->
    <section id="viewPrato" class="screen">
      <div class="h1">PRATO</div>

      <div class="card">
        <div class="hint">
          No modo local: voc√™ pode registrar uma ‚Äúnota‚Äù do prato + foto (opcional).
        </div>

        <div class="label">Nota do prato (0‚Äì10)</div>
        <input id="pratoNota" placeholder="Ex: 8" inputmode="numeric" />

        <div class="label">Descri√ß√£o</div>
        <textarea id="pratoTexto" placeholder="Ex: arroz, feij√£o, frango, salada..."></textarea>

        <div class="label">Imagem (opcional)</div>
        <input id="pratoImg" type="file" accept="image/*" />

        <div class="platePreview" id="platePreview" style="display:none">
          <img id="platePreviewImg" alt="Preview do prato"/>
        </div>

        <button class="btn" type="button" onclick="salvarPrato()">SALVAR PRATO</button>
        <button class="btnSecondary" type="button" onclick="limparPrato()">LIMPAR</button>

        <div id="outPrato" class="status"></div>
      </div>
    </section>

    <!-- =========================
         DIETA
         ========================= -->
    <section id="viewDieta" class="screen">
      <div class="h1">DIETA</div>

      <div class="card">
        <div class="hint">
          Sugest√£o b√°sica (modo local). Depois voc√™ pode evoluir para IA.
        </div>

        <div id="dietList"></div>

        <button class="btn" type="button" onclick="gerarDieta()">GERAR DIETA SUGERIDA</button>
        <button class="btnSecondary" type="button" onclick="limparDieta()">LIMPAR</button>

        <div id="outDieta" class="status"></div>
      </div>
    </section>

    <!-- =========================
         TREINO
         ========================= -->
    <section id="viewTreino" class="screen">
      <div class="h1">TREINO</div>

      <div class="card">
        <div class="hint">
          Treino sugerido (modo local). Voc√™ pode trocar exerc√≠cios depois.
        </div>

        <div id="treinoList"></div>

        <button class="btn" type="button" onclick="gerarTreino()">GERAR TREINO</button>
        <button class="btnSecondary" type="button" onclick="limparTreino()">LIMPAR</button>

        <div id="outTreino" class="status"></div>
      </div>
    </section>

    <!-- =========================
         EVOLU√á√ÉO
         ========================= -->
    <section id="viewEvolucao" class="screen">
      <div class="h1">EVOLU√á√ÉO</div>

      <div class="card">
        <div class="hint">
          Registre o que voc√™ fez hoje e acompanhe no gr√°fico.
        </div>

        <div class="row" style="margin-top:8px">
          <div class="col">
            <div class="label">Nota do dia (0‚Äì10)</div>
            <input id="dayScore" placeholder="Ex: 7" inputmode="numeric" />
          </div>
          <div class="col">
            <div class="label">Treinou hoje?</div>
            <select id="dayTreino">
              <option value="0">N√£o</option>
              <option value="1">Sim</option>
            </select>
          </div>
        </div>

        <button class="btn" type="button" onclick="salvarEvolucao()">SALVAR DIA</button>
        <button class="btnSecondary" type="button" onclick="limparEvolucao()">LIMPAR HIST√ìRICO</button>

        <div class="chartBox">
          <canvas id="evoChart" height="170"></canvas>
        </div>

        <div id="outEvo" class="status"></div>
      </div>
    </section>

    <!-- =========================
         PARCEIROS
         ========================= -->
    <section id="viewParceiros" class="screen">
      <div class="h1">PARCEIROS</div>

      <div class="card">
        <div class="hint">
          √Årea para academias, nutricionistas, lojas e cupons.
        </div>

        <div class="partnerList">
          <div class="partnerRow">
            <div class="partnerName">
              <b>Academia Exemplo</b>
              <span class="hint">Cupom: CHECK10</span>
            </div>
            <button class="btnSecondary" type="button" onclick="alert('Abrir contato (exemplo)')">Abrir</button>
          </div>

          <div class="partnerRow">
            <div class="partnerName">
              <b>Nutri Exemplo</b>
              <span class="hint">Consulta online</span>
            </div>
            <button class="btnSecondary" type="button" onclick="alert('Abrir contato (exemplo)')">Abrir</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- NAV -->
  <div class="nav">
    <div class="navInner">
      <button class="navBtn" data-view="viewWelcome" onclick="showOnly('viewWelcome')">BOAS-VINDAS</button>
      <button class="navBtn" data-view="viewCadastro" onclick="showOnly('viewCadastro')">CADASTRO</button>
      <button class="navBtn" data-view="viewPerfil" onclick="showOnly('viewPerfil')">PERFIL</button>
      <button class="navBtn" data-view="viewPrato" onclick="showOnly('viewPrato')">PRATO</button>
      <button class="navBtn" data-view="viewDieta" onclick="showOnly('viewDieta')">DIETA</button>
      <button class="navBtn" data-view="viewTreino" onclick="showOnly('viewTreino')">TREINO</button>
      <button class="navBtn" data-view="viewEvolucao" onclick="showOnly('viewEvolucao')">EVOLU√á√ÉO</button>
      <button class="navBtn" data-view="viewParceiros" onclick="showOnly('viewParceiros')">PARCEIROS</button>
    </div>
  </div>

  <script>
    /***********************
     * STORAGE KEYS
     ***********************/
    const KEY_PROFILE = "cp_profile";
    const KEY_CAD = "cp_cadastro";
    const KEY_PLATE = "cp_plate";
    const KEY_DIETA = "cp_dieta";
    const KEY_TREINO = "cp_treino";
    const KEY_EVO = "cp_evo";
    const KEY_LAST = "lastView";

    const $ = (id) => document.getElementById(id);

    /***********************
     * NAV (SHOWONLY)
     ***********************/
    function showOnly(viewId){
      document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
      const el = document.getElementById(viewId);
      if(el) el.classList.add("active");

      document.querySelectorAll(".navBtn").forEach(b => b.classList.remove("active"));
      const btn = document.querySelector(`.navBtn[data-view="${viewId}"]`);
      if(btn) btn.classList.add("active");

      try{ localStorage.setItem(KEY_LAST, viewId); }catch(e){}
    }

    /***********************
     * WELCOME CAROUSEL
     ***********************/
    let wIndex = 0;
    let wTimer = null;

    function wSlides(){
      const root = document.getElementById("viewWelcome");
      if(!root) return [];
      return Array.from(root.querySelectorAll(".wSlide"));
    }

    function wBuildDots(){
      const dotsWrap = document.getElementById("wDots");
      const slides = wSlides();
      if(!dotsWrap || slides.length === 0) return;

      dotsWrap.innerHTML = "";
      slides.forEach((_, i) => {
        const dot = document.createElement("div");
        dot.className = "wDot" + (i === wIndex ? " on" : "");
        dot.addEventListener("click", () => wGo(i));
        dotsWrap.appendChild(dot);
      });
    }

    function wGo(i){
      const slides = wSlides();
      if(slides.length === 0) return;

      wIndex = (i + slides.length) % slides.length;

      slides.forEach(s => s.classList.remove("active"));
      slides[wIndex].classList.add("active");

      document.querySelectorAll("#wDots .wDot").forEach((d, idx) => {
        d.classList.toggle("on", idx === wIndex);
      });
    }

    function wNext(){ wGo(wIndex + 1); }

    function wStartAuto(){
      if(wTimer) clearInterval(wTimer);
      wTimer = setInterval(wNext, 4500);
    }

    function initWelcome(){
      wIndex = 0;
      wBuildDots();
      wGo(0);
      wStartAuto();
    }

    function goCadastro(){
      showOnly("viewCadastro");
    }

    function goManual(){
      const el = document.getElementById("welcomeManual");
      if(el) el.scrollIntoView({ behavior:"smooth", block:"start" });
    }

    /***********************
     * CADASTRO
     ***********************/
    const ESPORTES = [
      "Muscula√ß√£o","Futebol","Corrida","Crossfit","Ciclismo","Nata√ß√£o","Luta","Basquete","V√¥lei",
      "Yoga","Pilates","Caminhada","Muay Thai","Jiu-Jitsu","Boxe","Funcional"
    ];
    let selectedEsportes = new Set();

    function renderEsportes(){
      const wrap = $("chipsEsportes");
      wrap.innerHTML = "";
      ESPORTES.forEach(name => {
        const div = document.createElement("div");
        div.className = "chip" + (selectedEsportes.has(name) ? " on" : "");
        div.textContent = name;
        div.onclick = () => {
          if(selectedEsportes.has(name)) selectedEsportes.delete(name);
          else selectedEsportes.add(name);
          renderEsportes();
        };
        wrap.appendChild(div);
      });
    }

    function salvarCadastro(){
      const termo = $("termo").checked;
      if(!termo){
        $("outCadastro").textContent = "‚ö†Ô∏è Marque o termo para salvar.";
        return;
      }

      const data = {
        peso: $("peso").value.trim(),
        altura: $("altura").value.trim(),
        objetivo: $("objetivo").value,
        nivel: $("nivel").value,
        condicao: $("condicao").value,
        restricao: $("restricao").value,
        esportes: Array.from(selectedEsportes),
        termo: true
      };

      localStorage.setItem(KEY_CAD, JSON.stringify(data));
      $("outCadastro").textContent = "‚úÖ Cadastro salvo.";
    }

    function limparCadastro(){
      localStorage.removeItem(KEY_CAD);
      $("peso").value = "";
      $("altura").value = "";
      $("objetivo").value = "";
      $("nivel").value = "";
      $("condicao").value = "";
      $("restricao").value = "";
      $("termo").checked = false;
      selectedEsportes = new Set();
      renderEsportes();
      $("outCadastro").textContent = "üßπ Cadastro limpo.";
    }

    function carregarCadastro(){
      const raw = localStorage.getItem(KEY_CAD);
      if(!raw) return;
      try{
        const d = JSON.parse(raw);
        $("peso").value = d.peso || "";
        $("altura").value = d.altura || "";
        $("objetivo").value = d.objetivo || "";
        $("nivel").value = d.nivel || "";
        $("condicao").value = d.condicao || "";
        $("restricao").value = d.restricao || "";
        $("termo").checked = !!d.termo;
        selectedEsportes = new Set(d.esportes || []);
        renderEsportes();
      }catch(e){}
    }

    /***********************
     * PERFIL
     ***********************/
    function salvarPerfil(){
      const data = {
        nome: $("nome").value.trim(),
        obs: $("obs").value.trim()
      };
      localStorage.setItem(KEY_PROFILE, JSON.stringify(data));
      $("outPerfil").textContent = "‚úÖ Perfil salvo.";
    }

    function carregarPerfil(){
      const raw = localStorage.getItem(KEY_PROFILE);
      if(!raw) return;
      try{
        const d = JSON.parse(raw);
        $("nome").value = d.nome || "";
        $("obs").value = d.obs || "";
      }catch(e){}
    }

    /***********************
     * PRATO
     ***********************/
    let plateImageDataUrl = null;

    function wirePlateInput(){
      const input = $("pratoImg");
      input.addEventListener("change", (e) => {
        const file = e.target.files && e.target.files[0];
        if(!file) return;
        const reader = new FileReader();
        reader.onload = () => {
          plateImageDataUrl = String(reader.result || "");
          $("platePreviewImg").src = plateImageDataUrl;
          $("platePreview").style.display = "block";
        };
        reader.readAsDataURL(file);
      });
    }

    function salvarPrato(){
      const data = {
        nota: $("pratoNota").value.trim(),
        texto: $("pratoTexto").value.trim(),
        img: plateImageDataUrl
      };
      localStorage.setItem(KEY_PLATE, JSON.stringify(data));
      $("outPrato").textContent = "‚úÖ Prato salvo.";
    }

    function limparPrato(){
      localStorage.removeItem(KEY_PLATE);
      $("pratoNota").value = "";
      $("pratoTexto").value = "";
      $("pratoImg").value = "";
      plateImageDataUrl = null;
      $("platePreview").style.display = "none";
      $("outPrato").textContent = "üßπ Prato limpo.";
    }

    function carregarPrato(){
      const raw = localStorage.getItem(KEY_PLATE);
      if(!raw) return;
      try{
        const d = JSON.parse(raw);
        $("pratoNota").value = d.nota || "";
        $("pratoTexto").value = d.texto || "";
        plateImageDataUrl = d.img || null;
        if(plateImageDataUrl){
          $("platePreviewImg").src = plateImageDataUrl;
          $("platePreview").style.display = "block";
        }
      }catch(e){}
    }

    /***********************
     * DIETA
     ***********************/
    function gerarDieta(){
      const cad = safeJson(localStorage.getItem(KEY_CAD)) || {};
      const objetivo = cad.objetivo || "Sa√∫de";

      const base = [
        {t:"Caf√©", d:"Ovos + fruta + √°gua", kcal: "350"},
        {t:"Almo√ßo", d:"Prote√≠na + arroz/mandioca + salada", kcal: "600"},
        {t:"Lanche", d:"Iogurte/banana + castanhas", kcal: "300"},
        {t:"Jantar", d:"Prote√≠na + legumes", kcal: "500"},
      ];

      if(objetivo === "Emagrecimento"){
        base[1].d = "Prote√≠na + salada + carbo moderado";
        base[3].d = "Prote√≠na + legumes (carbo leve)";
      } else if(objetivo === "Hipertrofia"){
        base[0].d = "Ovos + aveia + fruta";
        base[2].d = "Whey/Leite + banana + pasta de amendoim";
      }

      localStorage.setItem(KEY_DIETA, JSON.stringify(base));
      renderDieta();
      $("outDieta").textContent = "‚úÖ Dieta gerada.";
    }

    function renderDieta(){
      const list = $("dietList");
      const data = safeJson(localStorage.getItem(KEY_DIETA)) || [];
      list.innerHTML = "";
      data.forEach(m => {
        const div = document.createElement("div");
        div.className = "meal";
        div.innerHTML = `
          <div>
            <div class="title">${escapeHtml(m.t)}</div>
            <p>${escapeHtml(m.d)}</p>
          </div>
          <div class="kcal">${escapeHtml(m.kcal)}<br><span style="font-size:11px;opacity:.8">kcal</span></div>
        `;
        list.appendChild(div);
      });
    }

    function limparDieta(){
      localStorage.removeItem(KEY_DIETA);
      $("dietList").innerHTML = "";
      $("outDieta").textContent = "üßπ Dieta limpa.";
    }

    /***********************
     * TREINO
     ***********************/
    function gerarTreino(){
      const cad = safeJson(localStorage.getItem(KEY_CAD)) || {};
      const nivel = cad.nivel || "Iniciante";

      let treino = [];
      if(nivel === "Iniciante"){
        treino = [
          {dia:"Dia A", items:["Agachamento livre (leve)", "Flex√£o", "Remada com el√°stico"]},
          {dia:"Dia B", items:["Leg press (leve)", "Supino m√°quina", "Puxada frente"]},
          {dia:"Dia C", items:["Caminhada 30min", "Abd√¥men", "Alongamento"]},
        ];
      } else if(nivel === "Intermedi√°rio"){
        treino = [
          {dia:"Dia A", items:["Agachamento", "Supino", "Remada"]},
          {dia:"Dia B", items:["Levantamento terra", "Desenvolvimento", "Puxada"]},
          {dia:"Dia C", items:["Cardio 25min", "Core", "Mobilidade"]},
        ];
      } else {
        treino = [
          {dia:"Dia A", items:["Agachamento pesado", "Supino pesado", "Remada pesada"]},
          {dia:"Dia B", items:["Terra pesado", "Desenvolvimento", "Barra fixa"]},
          {dia:"Dia C", items:["HIIT 20min", "Core avan√ßado", "Alongamento"]},
        ];
      }

      localStorage.setItem(KEY_TREINO, JSON.stringify(treino));
      renderTreino();
      $("outTreino").textContent = "‚úÖ Treino gerado.";
    }

    function renderTreino(){
      const list = $("treinoList");
      const data = safeJson(localStorage.getItem(KEY_TREINO)) || [];
      list.innerHTML = "";

      data.forEach(day => {
        const box = document.createElement("div");
        box.className = "dayCard";
        const itemsHtml = (day.items || []).map(ex => `
          <div class="exercise">
            <div style="font-weight:900">${escapeHtml(ex)}</div>
            <button class="ytBtn" type="button" onclick="openYouTube('${escapeJs(ex)}')">Ver</button>
          </div>
        `).join("");

        box.innerHTML = `
          <div class="dayTitle">${escapeHtml(day.dia)} <span class="hint">3x/sem</span></div>
          ${itemsHtml}
        `;
        list.appendChild(box);
      });
    }

    function limparTreino(){
      localStorage.removeItem(KEY_TREINO);
      $("treinoList").innerHTML = "";
      $("outTreino").textContent = "üßπ Treino limpo.";
    }

    function openYouTube(q){
      const url = "https://www.youtube.com/results?search_query=" + encodeURIComponent(q);
      window.open(url, "_blank");
    }

    /***********************
     * EVOLU√á√ÉO (Chart)
     ***********************/
    let evoChart = null;

    function salvarEvolucao(){
      const score = Number(($("dayScore").value || "").trim());
      const treinou = $("dayTreino").value === "1";

      if(Number.isNaN(score) || score < 0 || score > 10){
        $("outEvo").textContent = "‚ö†Ô∏è Nota inv√°lida (0 a 10).";
        return;
      }

      const arr = safeJson(localStorage.getItem(KEY_EVO)) || [];
      const today = new Date();
      const label = `${String(today.getDate()).padStart(2,"0")}/${String(today.getMonth()+1).padStart(2,"0")}`;

      arr.push({ label, score, treinou, ts: Date.now() });

      // mant√©m s√≥ os √∫ltimos 14 registros
      const last = arr.slice(-14);
      localStorage.setItem(KEY_EVO, JSON.stringify(last));

      $("outEvo").textContent = "‚úÖ Dia salvo.";
      $("dayScore").value = "";
      $("dayTreino").value = "0";

      renderEvo();
    }

    function limparEvolucao(){
      localStorage.removeItem(KEY_EVO);
      $("outEvo").textContent = "üßπ Evolu√ß√£o limpa.";
      renderEvo();
    }

    function renderEvo(){
      const data = safeJson(localStorage.getItem(KEY_EVO)) || [];
      const labels = data.map(x => x.label);
      const scores = data.map(x => x.score);

      const ctx = document.getElementById("evoChart");
      if(!ctx) return;

      if(evoChart) evoChart.destroy();

      evoChart = new Chart(ctx, {
        type: "line",
        data: {
          labels,
          datasets: [{
            label: "Nota (0-10)",
            data: scores,
            tension: 0.35
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: true }
          },
          scales: {
            y: { min: 0, max: 10 }
          }
        }
      });
    }

    /***********************
     * HELPERS
     ***********************/
    function safeJson(raw){
      if(!raw) return null;
      try{ return JSON.parse(raw); }catch(e){ return null; }
    }
    function escapeHtml(s){
      return String(s ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
    function escapeJs(s){
      return String(s ?? "").replaceAll("\\","\\\\").replaceAll("'","\\'");
    }

    /***********************
     * INIT
     ***********************/
    function init(){
      renderEsportes();
      carregarCadastro();
      carregarPerfil();
      carregarPrato();
      renderDieta();
      renderTreino();
      renderEvo();
      wirePlateInput();
      initWelcome();

      const last = localStorage.getItem(KEY_LAST);
      if(last) showOnly(last);
      else showOnly("viewWelcome");
    }

    window.addEventListener("load", init);
  </script>
</body>
</html>
